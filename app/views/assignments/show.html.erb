<div class="card-wrapper list-wrapper">
  <h1><%= @assignment.name %>
    <%= link_to edit_assignment_path(@assignment) do %>
      <i class="fa fa-pencil" aria-hidden="true"></i>
    <% end %>
  </h1>
  <h3><%= @assignment.category %></h3>
  <h4><%= @assignment.date %></h4>


  <ul class="list-group">
    <% @grades.each do |grade| %>
      <%= link_to student_path(grade.student.id) do %>
        <li class= "list-group-item">
          <div class="item-name">
            <%= grade.student.first_name + " " + grade.student.last_name %>
          </div>
          <% end %>
          <div class="item-attribute student-grade" data-id="<%= grade.id %>">
            <%= simple_form_for grade, remote: true, url: grade_path do |f| %>
            <%= f.input :earned_points, label: false %>
            <%= f.input :id, as: :hidden, value: grade.id %>
            <%= f.hidden_field :redirect_to, value: "/assignments/#{@assignment.id}" %>
            <div class="hidden submit-button">
              <%= f.button :button, class: "btn edu-button" do %>
                Edit Grade
                <div class="text-underline-green"></div>
              <% end %>
            </div>
            <% end %>
          </div>
          <div class="item-attribute">
            / <%= @assignment.max_points %>
          </div>
        </li>

    <% end %>
  </ul>
</div>

<script>
  var edit = function() {
    $('.student-grade').on("click", function(event){
      var id = $(this).attr('data-id');
      console.log(id);
      $('[data-id=' + id + '] .submit-button' ).toggleClass("hidden");
    });
  };

  $(document).ready(function(){
    edit();
  });
</script>
